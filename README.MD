# ğŸš€ Extrator de Tabelas de PDF

<p align="center"><img src="public/pumper.png" width="200"></p>

Uma ferramenta profissional para extrair tabelas de arquivos PDF de forma rÃ¡pida e convertÃª-las para o formato Excel, com **Dark Mode** completo e **framework de testes robusto**.

## âœ¨ Funcionalidades

### ğŸ” **ExtraÃ§Ã£o Inteligente de PDFs**
- ExtraÃ§Ã£o automÃ¡tica usando **Camelot** e **Tabula** como fallback
- Processamento inteligente: remoÃ§Ã£o de headers duplicados e consolidaÃ§Ã£o de linhas quebradas
- ConfiguraÃ§Ã£o flexÃ­vel de colunas com nomes personalizados
- Suporte para PDFs complexos com mÃºltiplas tabelas

### ğŸŒ™ **Dark Mode Completo**
- Toggle dinÃ¢mico na sidebar (ğŸŒ™ Dark Mode / â˜€ï¸ Light Mode)
- CSS otimizado para reduzir cansaÃ§o visual
- PersistÃªncia do tema durante toda a sessÃ£o
- Interface responsiva e moderna

### ğŸ§ª **Framework de Testes Profissional**
- **46 testes automatizados** (100% de aprovaÃ§Ã£o)
- **Cobertura de cÃ³digo** de 78% no nÃºcleo da aplicaÃ§Ã£o
- **Benchmarks de performance** integrados
- **RelatÃ³rios HTML** visuais e detalhados

### ğŸ’¾ **ExportaÃ§Ã£o e Interface**
- ConversÃ£o direta para Excel com formataÃ§Ã£o
- Barra de progresso em tempo real
- Upload drag-and-drop intuitivo
- Preview dos dados extraÃ­dos

**Este projeto Ã© de cÃ³digo aberto, totalmente gratuito e nÃ£o possui fins lucrativos.**

![Screenshot da AplicaÃ§Ã£o](https://i.imgur.com/V234d9k.png)

## ğŸ› ï¸ Tecnologias Utilizadas

### **Core**
- **Front-end:** [Streamlit](https://streamlit.io/) - Interface web moderna
- **ExtraÃ§Ã£o PDF:** [Camelot-py](https://camelot-py.readthedocs.io/) + [Tabula-py](https://github.com/chezou/tabula-py)
- **Processamento:** [Pandas](https://pandas.pydata.org/) - ManipulaÃ§Ã£o de dados
- **ExportaÃ§Ã£o:** [XlsxWriter](https://xlsxwriter.readthedocs.io/) - GeraÃ§Ã£o de Excel

### **Testes e Qualidade**
- **pytest** - Framework de testes principal
- **pytest-cov** - Cobertura de cÃ³digo
- **pytest-benchmark** - MediÃ§Ã£o de performance  
- **pytest-mock** - Mocking profissional
- **pytest-html** - RelatÃ³rios visuais
- **faker** - Dados de teste realistas
- **hypothesis** - Testes baseados em propriedades

## ğŸš€ Como Executar Localmente

### ğŸ“‹ **PrÃ©-requisitos**

- **Python 3.8+**
- **Java:** NecessÃ¡rio para `tabula-py`. Verifique com:
  ```bash
  java -version
  ```

### âš¡ **InstalaÃ§Ã£o RÃ¡pida**

1. **Clone o repositÃ³rio:**
   ```bash
   git clone https://github.com/Beto1821/Extrator-de-Tabelas-PDF.git
   cd Extrator-de-Tabelas-PDF
   ```

2. **Configure o ambiente:**
   ```bash
   python -m venv .venv
   # Windows: .\.venv\Scripts\activate
   # macOS/Linux: source .venv/bin/activate
   ```

3. **Instale as dependÃªncias:**
   ```bash
   pip install -r requirements.txt
   ```

4. **Execute a aplicaÃ§Ã£o:**
   ```bash
   streamlit run app_ui.py
   ```

ğŸŒ **Acesse:** http://localhost:8501

---

## ğŸ§ª Framework de Testes

### ğŸ“Š **VisÃ£o Geral dos Testes**

O projeto possui um **framework de testes profissional** com cobertura abrangente:

- âœ… **46 testes automatizados** (100% aprovaÃ§Ã£o)
- âœ… **25 testes unitÃ¡rios** cobrindo funÃ§Ãµes crÃ­ticas
- âœ… **11 testes de integraÃ§Ã£o** validando pipelines completos  
- âœ… **10 testes de performance** com benchmarks detalhados
- âœ… **Cobertura de 78%** no cÃ³digo principal
- âœ… **RelatÃ³rios HTML** visuais e interativos

### ğŸ—‚ï¸ **Estrutura de Testes**

```
tests/
â”œâ”€â”€ unit/           # Testes unitÃ¡rios das funÃ§Ãµes
â”œâ”€â”€ integration/    # Testes end-to-end do pipeline
â”œâ”€â”€ performance/    # Benchmarks de performance
â”œâ”€â”€ conftest.py     # Fixtures compartilhadas
â””â”€â”€ reports/        # RelatÃ³rios HTML gerados
```

### ğŸ¯ **Como Executar os Testes**

#### **Teste Completo (Recomendado):**
```bash
pytest tests/ -v --cov=app --cov-report=html --html=tests/reports/test_report.html
```
*Executa todos os testes com cobertura e relatÃ³rio HTML*

#### **Testes por Categoria:**
```bash
# Apenas testes unitÃ¡rios (rÃ¡pido)
pytest tests/unit/ -v

# Apenas testes de integraÃ§Ã£o
pytest tests/integration/ -v

# Apenas benchmarks de performance
pytest tests/performance/ --benchmark-only

# Testes em paralelo (mais rÃ¡pido)
pytest tests/ -n auto
```

#### **RelatÃ³rios de Cobertura:**
```bash
# RelatÃ³rio no terminal
pytest tests/ --cov=app --cov-report=term

# RelatÃ³rio HTML detalhado
pytest tests/ --cov=app --cov-report=html
# Visualizar em: htmlcov/index.html
```

### âš¡ **Benchmarks de Performance**

Os testes medem automaticamente a performance das operaÃ§Ãµes:

- **OperaÃ§Ãµes rÃ¡pidas**: ~3.728 ops/sec (remoÃ§Ã£o de headers)
- **OperaÃ§Ãµes pandas**: ~600 ops/sec (manipulaÃ§Ã£o de dados)
- **Pipeline completo**: ~2 ops/sec (PDF â†’ Excel)

### ğŸ¨ **RelatÃ³rios Visuais**

ApÃ³s executar os testes, vocÃª terÃ¡ acesso a:

1. **RelatÃ³rio HTML de Testes**: `tests/reports/test_report.html`
2. **RelatÃ³rio de Cobertura**: `htmlcov/index.html`
3. **Benchmarks no Terminal**: EstatÃ­sticas detalhadas de performance

### ğŸ”§ **Ferramentas de Teste Instaladas**

- **pytest** - Framework principal
- **pytest-cov** - Cobertura de cÃ³digo
- **pytest-benchmark** - MediÃ§Ã£o de performance
- **pytest-html** - RelatÃ³rios visuais
- **pytest-mock** - Mocking profissional
- **pytest-xdist** - ExecuÃ§Ã£o paralela
- **faker** - Dados de teste realistas  
- **hypothesis** - Testes baseados em propriedades
- **psutil** - Monitoramento de memÃ³ria

### ğŸ’¡ **Exemplos de Uso dos Testes**

```bash
# Desenvolvimento: executar testes durante codificaÃ§Ã£o
pytest tests/unit/ -x --tb=short

# CI/CD: executar com cobertura mÃ­nima
pytest tests/ --cov=app --cov-fail-under=70

# Performance: verificar se nÃ£o hÃ¡ regressÃ£o
pytest tests/performance/ --benchmark-compare

# Debugging: executar teste especÃ­fico
pytest tests/unit/test_data_processing.py::test_consolidate_broken_rows -v
```

### ğŸ“ˆ **BenefÃ­cios do Framework de Testes**

- **ğŸ›¡ï¸ DetecÃ§Ã£o Precoce**: Bugs capturados antes da produÃ§Ã£o
- **ğŸ”„ RefatoraÃ§Ã£o Segura**: MudanÃ§as validadas automaticamente  
- **ğŸ“Š Monitoramento**: Performance acompanhada continuamente
- **ğŸ“‹ DocumentaÃ§Ã£o**: Testes servem como documentaÃ§Ã£o viva
- **ğŸš€ ConfianÃ§a**: Deploy seguro com validaÃ§Ã£o completa

---

## ğŸŒ™ Como Usar o Dark Mode

1. **Ativar**: Clique em "ğŸŒ™ Dark Mode" na sidebar
2. **Desativar**: Clique em "â˜€ï¸ Light Mode" na sidebar  
3. **PersistÃªncia**: Tema mantido durante toda a sessÃ£o

---

## ğŸ“ Estrutura do Projeto

```
app_raspagem_pdf/
â”œâ”€â”€ app.py              # LÃ³gica de extraÃ§Ã£o PDF
â”œâ”€â”€ app_ui.py           # Interface Streamlit
â”œâ”€â”€ requirements.txt    # DependÃªncias
â”œâ”€â”€ pyproject.toml     # ConfiguraÃ§Ã£o pytest
â”œâ”€â”€ tests/             # Framework de testes
â”‚   â”œâ”€â”€ unit/          # Testes unitÃ¡rios
â”‚   â”œâ”€â”€ integration/   # Testes integraÃ§Ã£o  
â”‚   â”œâ”€â”€ performance/   # Benchmarks
â”‚   â””â”€â”€ conftest.py    # Fixtures
â”œâ”€â”€ htmlcov/           # RelatÃ³rios cobertura
â””â”€â”€ temp_files/        # Arquivos temporÃ¡rios
```

---

## ğŸ¯ Como Usar a AplicaÃ§Ã£o

### ğŸ“„ **Upload e ConfiguraÃ§Ã£o**
1. Acesse http://localhost:8501 
2. Escolha o tema (ğŸŒ™ Dark Mode / â˜€ï¸ Light Mode)
3. FaÃ§a upload do arquivo PDF
4. Configure o nÃºmero de colunas esperadas
5. Defina os nomes das colunas (opcional)

### âš™ï¸ **Processamento AutomÃ¡tico**
- A aplicaÃ§Ã£o tenta **Camelot** primeiro (mais preciso)
- Fallback para **Tabula** se necessÃ¡rio
- Remove headers duplicados automaticamente  
- Consolida linhas quebradas
- Valida e limpa os dados

### ğŸ“Š **Resultados**
- Preview dos dados extraÃ­dos
- Download automÃ¡tico do Excel
- Feedback visual do progresso
- Tratamento de erros amigÃ¡vel

---

## ğŸ¤ Contribuindo

### ğŸ› **Reportar Bugs**
1. Execute os testes: `pytest tests/ -v`
2. Inclua logs e versÃµes no issue
3. Descreva os passos para reproduzir

### ğŸ”§ **Desenvolvimento** 
```bash
# Setup completo para desenvolvimento
git clone https://github.com/Beto1821/Extrator-de-Tabelas-PDF.git
cd Extrator-de-Tabelas-PDF
python -m venv .venv
source .venv/bin/activate  # ou .\.venv\Scripts\activate no Windows
pip install -r requirements.txt

# Executar testes durante desenvolvimento
pytest tests/unit/ -x --tb=short

# Verificar cobertura
pytest tests/ --cov=app --cov-report=term
```

### âœ… **Pull Request Checklist**
- [ ] Todos os testes passando: `pytest tests/`
- [ ] Cobertura mantida acima de 70%
- [ ] CÃ³digo formatado: `black . && flake8 .`
- [ ] Funcionalidade testada manualmente
- [ ] README atualizado se necessÃ¡rio

---

## ğŸ“Š Status do Projeto

- âœ… **ExtraÃ§Ã£o PDF**: Camelot + Tabula implementado
- âœ… **Interface**: Streamlit com Dark Mode
- âœ… **Testes**: Framework completo (46 testes)
- âœ… **Performance**: Benchmarks integrados  
- âœ… **Cobertura**: 78% no cÃ³digo principal
- âœ… **RelatÃ³rios**: HTML automÃ¡tico
- â³ **CI/CD**: Em planejamento
- â³ **Docker**: Em planejamento

---

## ğŸ“œ LicenÃ§a

Este projeto Ã© **open-source** e **gratuito**. Desenvolvido sem fins lucrativos para a comunidade.

---

## ğŸ’¡ Suporte

- ğŸ› **Issues**: [GitHub Issues](https://github.com/Beto1821/Extrator-de-Tabelas-PDF/issues)
- ğŸ“§ **Email**: Para questÃµes tÃ©cnicas especÃ­ficas
- ğŸ“– **DocumentaÃ§Ã£o**: Este README + cÃ³digo comentado

---

**Desenvolvido com â¤ï¸ para facilitar extraÃ§Ã£o de dados PDF**